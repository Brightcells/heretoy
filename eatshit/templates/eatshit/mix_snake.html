{% load staticfiles %}

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>HTML5 -- 贪吃翔</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="keywords" content="HTML5 经典 小游戏 贪吃蛇">
        <meta name="description" content="">

        <link href="{% static 'eatshit/css/mix_snake.css' %}" rel="stylesheet">

        <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
            <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
    </head>
    <body>
        <div id="header" class="header">
            <div class="warp">
                <div class="countDown"><span>剩余时间：</span><span id="leftTime" class="leftTime">180</span></div>

                <div id="scorePanel" class="scorePanel">
                    <!-- <strong>最高分</strong> -->
                    <div id="highestScore" class="highestScore">0</div>
                    <!-- <strong>分数</strong> -->
                    <span id="score" class="score">0</span><span>坨翔翔</span>
                </div>

                <div class="shitPanel">
                    <img id="shitLogo" class="shitLogo" src="" />
                </div>
            </div>
        </div>

        <div class="warp">
            <div id="gamePanel" class="gamePanel" tabindex="0">
                <canvas id="myCanvas" class="myCanvas" width="300" height="300">
                    Your browser does not support the canvas element.
                </canvas>
            </div>

            <div id="controlPanel">
                <select id="speed" class="speed">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                    <option>6</option>
                    <option>7</option>
                    <option>8</option>
                    <option>9</option>
                </select>
                <button id="start" class="start_button" onclick="startGame(this)">开始</button>
                <button id="control" class="control_button" onclick="control(this)" disabled="true">暂停</button>
            </div>

            <div id="foter" class="footer">
                <p>Power by HereToy</p>
            </div>

            <div id="hidden" class="hidden">
                {% ifequal photo_data '' %}
                    <img id="photo" src="{% static 'eatshit/img/photo/wq.png' %}" />
                {% else %}
                    <img id="photo" src="{{ photo_data.image }}" />
                {% endifequal %}
                <img id="shit" src="" />
            </div>
        </div>

        <div id="share" class="share">
            <div class="achieve">
                {% ifequal photo_data '' %}{% else %}<span class="red">{{ photo_data.name }}</span>{% endifequal %}同学，恭喜您！在疯狂吃翔游戏中，您疯狂的吃掉了<span id="shitNum" class="red"></span>坨翔翔，击败了<span id="rank" class="red"></span>%的同学，英勇的获得<span id="title" class="red"></span>称号！！！
            </div>
            <div>
                <button id="once_more" class="once_more" onclick="once_more(this)">再来一次</button>
            </div>
            <div class="bdsharebuttonbox" data-tag="share_1">
                <a class="bds_mshare" data-cmd="mshare"></a>
                <a class="bds_qzone" data-cmd="qzone" href="#"></a>
                <a class="bds_tsina" data-cmd="tsina"></a>
                <a class="bds_baidu" data-cmd="baidu"></a>
                <a class="bds_renren" data-cmd="renren"></a>
                <a class="bds_tqq" data-cmd="tqq"></a>
                <a class="bds_more" data-cmd="more">更多</a>
                <a class="bds_count" data-cmd="count"></a>
            </div>
        </div>

        <script src="{% static 'eatshit/js/hammer.min.js' %}"></script>
        <script src="{% static 'eatshit/js/mix_snake.js' %}"></script>
        <script language="JavaScript">
            var shitNum = 4,
                shitId = Math.floor(Math.random() * shitNum),
                shitUrl = "/static/" + "eatshit/img/shit/" + String(shitId) + ".jpg";
            document.getElementById("shit").src = shitUrl;
            document.getElementById("shitLogo").src = shitUrl;

            var gameMrg = new Ga1900("myCanvas");
            function startGame(startBtn) {
                /*var step = document.getElementById("speed").value;*/
                var step = 5;
                document.getElementById("leftTime").innerHTML = 180;
                gameMrg.startGame(step);
                document.getElementById("gamePanel").focus();
                pause = true;
                var btn = document.getElementById("control");
                btn.innerHTML = "暂停";
                btn.disabled = false;
            }

            var pause = true;
            function control(btn) {
                if (pause) {
                    gameMrg.pause();
                    btn.innerHTML = "继续";
                } else {
                    gameMrg.goon();
                    btn.innerHTML = "暂停";
                    document.getElementById("gamePanel").focus();
                }
                pause = !pause;
            }

            function once_more(moreBtn) {
                document.getElementById("share").style.display = "none";
                var startBtn = document.getElementById("start");
                startGame(startBtn);
            }
        </script>

        <script>
            window._bd_share_config = {
                common: {
                    bdText : '我刚刚玩了这个游戏，吃翔翔达人，很赞的哦~',
                    bdUrl : 'http://www.heretoy.com/eatshit/',
                    bdSnsKey: {},
                    bdMini: "2",
                    bdMiniList: false,
                    bdStyle: "0",
                    bdSize: "20"
                },
                share: {}
            };
            with(document) 0[(getElementsByTagName('head')[0] || body).appendChild(createElement('script')).src = 'http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion=' + ~(-new Date() / 36e5)];
        </script>
    </body>
</html>
