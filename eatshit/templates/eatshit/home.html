{% load staticfiles %}

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>HTML5 -- 贪吃翔</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="keywords" content="HTML5 经典 小游戏 贪吃蛇">
        <meta name="description" content="">

        <link href="{% static 'eatshit/css/mix_snake.css' %}" rel="stylesheet">

        <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
            <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
    </head>
    <body>
        <div class="warp">
            <div id="home-header" class="home-header">
                <div class=""><h1>吃翔翔达人</h1></div>
                <div class="">爱TA就给TA吃翔翔!!!</div>
            </div>

            <div class="upload">
                <form class="form-horizontal" method="post" action="" enctype='multipart/form-data'>{% csrf_token %}
                    <span>上传吃翔翔的好友头像</span>
                    <div>{{ form.image }}</div>
                    <div><img class="photo" src={{ photo_data.image }} /></div>
                    <span>上传吃翔翔的好友名字</span>
                    <div>{{ form.name }}</div>
                    <div><button type="submit" class="btn btn-control summit-photo">上传</button></div>
                </form>
            </div>

            <div class="start">
                {% ifequal photo_data '' %}
                    <a class="start-game" href="{% url 'eatshit:eatshit' %}">开始游戏</a>
                {% else %}
                    <a class="start-game" href="{% url 'eatshit:eatshit' photo_data.pk %}">开始游戏</a>
                {% endifequal %}
            </div>

            <div id="foter" class="footer">
                <p>Power by HereToy</p>
            </div>

            <div id="hidden" class="hidden">
                <img id="photo" src="{% static 'eatshit/img/photo/wq.png' %}" />
                <img id="shit" src="" />
            </div>
        </div>

        <script src="{% static 'eatshit/js/hammer.min.js' %}"></script>
        <script src="{% static 'eatshit/js/mix_snake.js' %}"></script>
        <script language="JavaScript">
            var shitNum = 4,
                shitId = Math.floor(Math.random() * shitNum),
                shitUrl = "/static/" + "eatshit/img/shit/" + String(shitId) + ".jpg";
            document.getElementById("shit").src = shitUrl;
            document.getElementById("shitLogo").src = shitUrl;

            var gameMrg = new Ga1900("myCanvas");
            function startGame(startBtn){
                /*var step = document.getElementById("speed").value;*/
                var step = 5;
                gameMrg.startGame(step);
                document.getElementById("gamePanel").focus();
                pause = true;
                var btn = document.getElementById("control");
                btn.innerHTML = "暂停";
                btn.disabled = false;
            }

            var pause = true;
            function control(btn){
                if (pause) {
                    gameMrg.pause();
                    btn.innerHTML = "继续";
                } else {
                    gameMrg.goon();
                    btn.innerHTML = "暂停";
                    document.getElementById("gamePanel").focus();
                }
                pause = !pause;
            }
        </script>
    </body>
</html>
